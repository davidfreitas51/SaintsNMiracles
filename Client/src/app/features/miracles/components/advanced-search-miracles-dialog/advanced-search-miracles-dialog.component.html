<h2 mat-dialog-title class="text-lg font-semibold">Advanced Search</h2>

<mat-dialog-content class="mt-4">
  <div class="flex flex-col gap-4">
    <div class="flex flex-col sm:flex-row gap-4">
      <mat-form-field appearance="fill" class="w-full sm:w-1/2">
        <mat-label>Filter by Country</mat-label>
        <mat-select [(ngModel)]="selectedCountry">
          <mat-option value="">All</mat-option>
          <mat-option *ngFor="let country of countries" [value]="country">
            {{ country }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full sm:w-1/2">
        <mat-label>Filter by Century</mat-label>
        <mat-select [(ngModel)]="selectedCentury">
          <mat-option value="">All</mat-option>
          <mat-option *ngFor="let c of centuries" [value]="c">
            {{ c | roman }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="flex flex-col sm:flex-row gap-4">
      <mat-form-field appearance="fill" class="w-full sm:w-1/2">
        <mat-label>Filter by Month</mat-label>
        <mat-select [(ngModel)]="selectedMonth">
          <mat-option value="">All</mat-option>
          <mat-option *ngFor="let m of months" [value]="m.value">
            {{ m.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full sm:w-1/2">
        <mat-label>Filter by Saint</mat-label>
        <mat-select [(ngModel)]="selectedSaintId">
          <mat-option value="">All</mat-option>
          <mat-option *ngFor="let saint of saints" [value]="saint.id">
            {{ saint.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Tags -->
    <div>
      <label class="block mb-1 font-medium text-sm">Tags</label>
      <div class="flex flex-wrap gap-2 mt-1">
        @for (tag of tags; track $index) { @if (selectedTags.includes(tag)) {
        <button
          (click)="unselectTag(tag)"
          class="text-xs font-medium px-3 py-1 rounded-full bg-green-600 text-white shadow-sm"
        >
          {{ tag.name }}
        </button>
        } @else {
        <button
          (click)="selectTag(tag)"
          class="text-xs font-medium px-3 py-1 rounded-full bg-gray-200 text-gray-800 shadow-sm"
        >
          {{ tag.name }}
        </button>
        } }
      </div>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end" class="mt-6">
  <button mat-button mat-dialog-close>Cancel</button>
  <button (click)="onApplyFilters()" mat-flat-button color="primary">
    Apply Filters
  </button>
</mat-dialog-actions>
